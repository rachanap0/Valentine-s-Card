<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Will You Be My Valentine?</title>

    <style>
      :root {
        --r1: #ff1f4b;
        --r2: #ff3b5c;
        --r3: #ff4d6d;
        --r4: #ff758f;
        --r5: #ffd1dc;

        --glass: rgba(255, 255, 255, 0.14);
        --stroke: rgba(255, 255, 255, 0.35);
        --ink: rgba(255, 255, 255, 0.96);
        --inkSoft: rgba(255, 255, 255, 0.86);
        --shadow: 0 18px 60px rgba(0, 0, 0, 0.28);

        --radius-xl: 32px;
        --radius-lg: 22px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        font-family: Georgia, "Times New Roman", serif;
        background: radial-gradient(
            circle at 18% 10%,
            rgba(255, 255, 255, 0.22) 0%,
            transparent 40%
          ),
          radial-gradient(
            circle at 80% 85%,
            rgba(0, 0, 0, 0.15) 0%,
            transparent 45%
          ),
          linear-gradient(
            135deg,
            #b50024 0%,
            var(--r1) 35%,
            var(--r3) 75%,
            #ff9bb1 100%
          );
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* ===== Background stickers canvas ===== */
      #stickers {
        position: fixed;
        inset: 0;
        z-index: 0;
        pointer-events: none;
      }

      /* Soft blobs */
      .blob {
        position: fixed;
        width: 460px;
        height: 460px;
        border-radius: 50%;
        filter: blur(46px);
        opacity: 0.55;
        z-index: 0;
        pointer-events: none;
        animation: blobFloat 12s ease-in-out infinite;
      }
      .blob.b1 {
        background: rgba(255, 255, 255, 0.18);
        top: -170px;
        left: -150px;
      }
      .blob.b2 {
        background: rgba(255, 117, 143, 0.25);
        bottom: -170px;
        right: -150px;
        animation-duration: 14s;
      }
      .blob.b3 {
        background: rgba(0, 0, 0, 0.14);
        top: 32%;
        left: 72%;
        width: 360px;
        height: 360px;
        animation-duration: 16s;
      }

      @keyframes blobFloat {
        0%,
        100% {
          transform: translate(0, 0) scale(1);
        }
        50% {
          transform: translate(32px, -22px) scale(1.08);
        }
      }

      /* ===== Sections ===== */
      .section {
        position: relative;
        z-index: 2;
        min-height: 100vh;
        width: 100%;
        display: none;
        justify-content: center;
        align-items: center;
        padding: 28px 18px;
      }
      .section.active {
        display: flex;
      }

      /* ===== Card surfaces ===== */
      .card {
        background: var(--glass);
        border: 1px solid var(--stroke);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        box-shadow: var(--shadow);
        border-radius: var(--radius-xl);
      }

      /* ===== Top UI ===== */
      .top-left {
        position: fixed;
        top: 14px;
        left: 14px;
        z-index: 60;
        display: none;
      }
      .top-right {
        position: fixed;
        top: 14px;
        right: 14px;
        z-index: 60;
        display: flex;
        gap: 10px;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.14);
        border: 1px solid rgba(255, 255, 255, 0.32);
        backdrop-filter: blur(10px);
        color: white;
        font-weight: 800;
        cursor: pointer;
        user-select: none;
        box-shadow: 0 12px 26px rgba(0, 0, 0, 0.18);
      }
      .chip:active {
        transform: scale(0.98);
      }

      /* ===== Bottom-right NEXT arrow ===== */
      .next-btn {
        position: fixed;
        right: 16px;
        bottom: 16px;
        z-index: 70;
        width: 58px;
        height: 58px;
        border-radius: 16px;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.14);
        border: 1px solid rgba(255, 255, 255, 0.32);
        backdrop-filter: blur(10px);
        box-shadow: 0 12px 26px rgba(0, 0, 0, 0.2);
        color: white;
        font-size: 1.6rem;
        font-weight: 900;
        cursor: pointer;
        user-select: none;
        transition: transform 0.18s ease, background 0.18s ease;
      }
      .next-btn:hover {
        background: rgba(255, 255, 255, 0.22);
        transform: translateY(-2px) scale(1.03);
      }
      .next-btn:active {
        transform: scale(0.98);
      }

      /* ===== Text ===== */
      .title {
        font-size: clamp(2.4rem, 5vw, 4rem);
        color: var(--ink);
        text-shadow: 0 10px 24px rgba(0, 0, 0, 0.28);
        letter-spacing: 0.5px;
      }
      .subtitle {
        color: var(--inkSoft);
        margin-top: 14px;
        font-size: 1.15rem;
        line-height: 1.5;
        text-shadow: 0 10px 22px rgba(0, 0, 0, 0.16);
      }

      /* ===== Buttons ===== */
      .btnrow {
        margin-top: 34px;
        display: flex;
        gap: 16px;
        justify-content: center;
        flex-wrap: wrap;
      }

      button {
        border: none;
        cursor: pointer;
        font-weight: 800;
        border-radius: 999px;
        padding: 14px 26px;
        font-size: 1.05rem;
        transition: transform 0.18s ease, box-shadow 0.18s ease,
          background 0.18s ease;
        box-shadow: 0 14px 38px rgba(0, 0, 0, 0.22);
        user-select: none;
      }
      .btn-yes {
        color: white;
        background: linear-gradient(
          135deg,
          #ff2d55 0%,
          #ff5d7a 55%,
          #ff8fab 100%
        );
      }
      .btn-yes:hover {
        transform: translateY(-2px) scale(1.04);
        box-shadow: 0 18px 50px rgba(255, 45, 85, 0.35);
      }

      .btn-soft {
        color: white;
        background: rgba(255, 255, 255, 0.14);
        border: 1px solid rgba(255, 255, 255, 0.28);
        backdrop-filter: blur(10px);
      }
      .btn-soft:hover {
        transform: translateY(-2px) scale(1.03);
        background: rgba(255, 255, 255, 0.2);
      }

      /* ===== QUESTION ===== */
      .question-wrap {
        width: min(980px, 96vw);
        padding: clamp(26px, 4vw, 44px);
        text-align: center;
      }
      .heart-badge {
        font-size: clamp(4.8rem, 7vw, 6.2rem);
        display: inline-block;
        filter: drop-shadow(0 18px 32px rgba(0, 0, 0, 0.22));
        animation: heartbeat 1.25s infinite;
      }
      @keyframes heartbeat {
        0%,
        100% {
          transform: scale(1);
        }
        25% {
          transform: scale(1.13);
        }
        50% {
          transform: scale(1);
        }
      }

      /* ===== MENU ===== */
      .menu-wrap {
        width: min(1100px, 96vw);
        padding: clamp(22px, 3vw, 34px);
      }
      .menu-head {
        text-align: center;
        padding: 10px 10px 22px;
      }
      .menu-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 18px;
        padding: 16px;
      }
      .menu-item {
        padding: 26px 18px;
        border-radius: var(--radius-lg);
        background: rgba(255, 255, 255, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.32);
        backdrop-filter: blur(10px);
        transition: transform 0.22s ease, background 0.22s ease,
          box-shadow 0.22s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }
      .menu-item:hover {
        transform: translateY(-6px) scale(1.02);
        background: rgba(255, 255, 255, 0.22);
        box-shadow: 0 22px 50px rgba(0, 0, 0, 0.25);
      }
      .menu-icon {
        font-size: 3.2rem;
        display: block;
        margin-bottom: 10px;
        animation: floaty 2.6s ease-in-out infinite;
      }
      @keyframes floaty {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .menu-label {
        color: white;
        font-weight: 900;
        font-size: 1.1rem;
      }
      .menu-desc {
        margin-top: 8px;
        color: rgba(255, 255, 255, 0.86);
        font-size: 0.95rem;
        line-height: 1.4;
      }

      /* ===== LETTER ===== */
      .letter-wrap {
        width: min(900px, 96vw);
        padding: 0;
        overflow: hidden;
      }
      .letter-header {
        text-align: center;
        padding: 26px 22px 10px;
      }
      .letter-paper {
        background: linear-gradient(to bottom, #ffe8ee, #ffd1dc);
        border-top: 1px solid rgba(255, 255, 255, 0.6);
        padding: clamp(22px, 4vw, 48px);
        position: relative;
      }
      .letter-paper::before {
        content: "";
        position: absolute;
        top: 0;
        left: 26px;
        width: 3px;
        height: 100%;
        background: rgba(181, 0, 36, 0.18);
      }
      .letter-body {
        font-family: "Brush Script MT", "Lucida Handwriting", cursive;
        color: #7a0030;
        font-size: clamp(1.05rem, 2.5vw, 1.25rem);
        line-height: 2;
      }
      .letter-body p {
        margin-bottom: 18px;
        text-indent: 30px;
      }
      .typewriter-caret {
        display: inline-block;
        width: 10px;
        height: 22px;
        background: rgba(181, 0, 36, 0.7);
        margin-left: 6px;
        animation: blink 0.9s infinite;
        transform: translateY(4px);
      }
      @keyframes blink {
        0%,
        100% {
          opacity: 0.15;
        }
        50% {
          opacity: 1;
        }
      }
      .signature {
        text-align: right;
        margin-top: 18px;
        font-size: 1.5rem;
        font-family: "Brush Script MT", "Lucida Handwriting", cursive;
        color: #b50024;
      }

      /* ===== BOUQUET ===== */
      .bouquet-wrap {
        width: min(1000px, 96vw);
        padding: 24px;
        text-align: center;
      }
      .bouquet {
        font-size: clamp(7rem, 12vw, 12rem);
        filter: drop-shadow(0 20px 38px rgba(0, 0, 0, 0.18));
        animation: popIn 0.7s ease both;
      }
      @keyframes popIn {
        from {
          transform: scale(0.75);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }
      .quotes {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 14px;
        margin-top: 20px;
        padding: 10px;
      }
      .quote {
        padding: 18px;
        border-radius: var(--radius-lg);
        background: rgba(255, 255, 255, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.32);
        color: white;
        font-style: italic;
        line-height: 1.5;
      }

      /* ===== GALLERY + LIGHTBOX ===== */
      .gallery-wrap {
        width: min(1100px, 96vw);
        padding: 22px;
      }
      .polaroid-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        padding: 10px;
      }
      .polaroid {
        background: #fff0f5;
        border-radius: 16px;
        padding: 14px 14px 16px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
        transform: rotate(var(--rot, 0deg));
        transition: transform 0.2s ease;
        cursor: pointer;
      }
      .polaroid:hover {
        transform: rotate(0deg) scale(1.03);
      }
      .polaroid-image {
        aspect-ratio: 1;
        border-radius: 12px;
        background: linear-gradient(135deg, #ff1f4b 0%, #ff6b85 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3.6rem;
      }
      .polaroid-caption {
        text-align: center;
        font-family: "Brush Script MT", cursive;
        color: #b50024;
        font-size: 1.05rem;
        margin-top: 10px;
      }

      .lightbox {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.72);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 100;
        padding: 18px;
      }
      .lightbox.show {
        display: flex;
      }
      .lightbox-card {
        width: min(520px, 94vw);
        border-radius: 22px;
        background: linear-gradient(135deg, #ff2d55 0%, #ff8fab 100%);
        padding: 18px;
        text-align: center;
        animation: drop 0.25s ease both;
        border: 1px solid rgba(255, 255, 255, 0.28);
      }
      @keyframes drop {
        from {
          transform: translateY(-10px) scale(0.98);
          opacity: 0;
        }
        to {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
      }
      .lightbox-emoji {
        font-size: 5rem;
        margin: 10px 0 8px;
      }
      .lightbox-caption {
        color: rgba(255, 255, 255, 0.95);
        font-weight: 900;
        font-size: 1.15rem;
        margin-bottom: 12px;
      }

      /* ===== GIFT ===== */
      .gift-wrap {
        width: min(760px, 96vw);
        padding: 26px;
        text-align: center;
      }
      .gift-box {
        width: 12em;
        height: 12em;
        position: relative;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        z-index: 3;
        transition: transform 0.25s ease;
        perspective: 900px;
      }
      .box-body {
        font-size: 12em;
        transition: transform 0.35s ease;
      }
      .box-lid {
        position: absolute;
        left: 50%;
        transform: translateX(-50%) translateY(0) rotateX(0deg);
        bottom: calc(50% - 38px);
        width: 70%;
        height: 2.4rem;
        z-index: 5;
        pointer-events: none;
        transform-origin: 50% 100%;
        backface-visibility: hidden;
      }
      .box-lid .lid-top {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff6b85 0%, #ff1f4b 100%);
        border-radius: 8px;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.15);
        border: 2px solid rgba(255, 255, 255, 0.35);
      }
      .lid-open {
        animation: hingeOpen 0.75s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }
      @keyframes hingeOpen {
        0% {
          transform: translateX(-50%) translateY(0) rotateX(0deg);
        }
        60% {
          transform: translateX(-50%) translateY(-12px) rotateX(-75deg);
        }
        100% {
          transform: translateX(-50%) translateY(-22px) rotateX(-82deg);
        }
      }
      .gift-message {
        margin-top: 18px;
        font-size: clamp(1.5rem, 3vw, 2.1rem);
        color: white;
        text-shadow: 0 10px 22px rgba(0, 0, 0, 0.22);
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.35s ease, transform 0.35s ease;
      }
      .gift-message.show {
        opacity: 1;
        transform: translateY(0);
      }

      .floating-heart {
        position: absolute;
        font-size: 2.2em;
        opacity: 0;
        animation: floatUp 1.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        pointer-events: none;
        z-index: 4;
        text-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);
      }
      @keyframes floatUp {
        0% {
          transform: translateY(0) translateX(0) scale(0.9) rotate(0deg);
          opacity: 0;
        }
        12% {
          opacity: 1;
        }
        100% {
          transform: translateY(-260px) translateX(var(--dx, 0px)) scale(1.05)
            rotate(20deg);
          opacity: 0;
        }
      }

      /* ===== MUSIC ===== */
      .music-wrap {
        width: min(760px, 96vw);
        padding: 26px;
        text-align: center;
      }
      .disc {
        font-size: 8rem;
        display: inline-block;
        animation: spin 4s linear infinite;
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .song {
        margin-top: 14px;
        padding: 14px 18px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.32);
        color: white;
      }
      /* ===== MUSIC (new aesthetic) ===== */
      .cd-stage {
        margin-top: 18px;
        display: grid;
        place-items: center;
        position: relative;
      }

      .cd-btn {
        position: relative;
        border: none;
        background: transparent;
        cursor: pointer;
        padding: 18px;
        border-radius: 999px;
        outline: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
      }

      .cd-btn:active {
        transform: scale(0.98);
      }

      .cd-ring {
        position: absolute;
        inset: 10px;
        border-radius: 999px;
        border: 2px dashed rgba(255, 255, 255, 0.45);
        filter: drop-shadow(0 10px 24px rgba(0, 0, 0, 0.18));
        animation: ringWobble 2.2s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes ringWobble {
        0%,
        100% {
          transform: rotate(-2deg) scale(1);
        }
        50% {
          transform: rotate(2deg) scale(1.02);
        }
      }

      .disc {
        font-size: 9rem; /* slightly bigger */
        display: inline-block;
        filter: drop-shadow(0 18px 34px rgba(0, 0, 0, 0.22));
      }

      /* when playing, spin */
      .disc.playing {
        animation: spin 2.6s linear infinite;
      }

      /* when paused, subtle float */
      .disc.paused {
        animation: cdFloat 2.6s ease-in-out infinite;
      }

      @keyframes cdFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* doodle labels */
      .doodle {
        position: absolute;
        font-family: "Brush Script MT", "Lucida Handwriting", cursive;
        color: rgba(255, 255, 255, 0.92);
        font-size: 1.6rem;
        text-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        transform: rotate(-6deg);
        pointer-events: none;
      }

      .doodle-top {
        top: -4px;
        left: 50%;
        transform: translateX(-50%) rotate(-7deg);
      }

      .doodle-bottom {
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%) rotate(6deg);
        opacity: 0.9;
      }

      /* memory line */
      .music-line {
        margin-top: 18px;
        text-align: center;
        font-size: 1.05rem;
        max-width: 560px;
      }

      /* tiny visual feedback pulse on click */
      .cd-btn.pulse::after {
        content: "";
        position: absolute;
        inset: -6px;
        border-radius: 999px;
        border: 2px solid rgba(255, 255, 255, 0.45);
        animation: pulseRing 0.5s ease-out forwards;
        pointer-events: none;
      }

      @keyframes pulseRing {
        from {
          opacity: 0.7;
          transform: scale(0.98);
        }
        to {
          opacity: 0;
          transform: scale(1.08);
        }
      }

      /* ===== Modal (sad) ===== */
      .modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.72);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 120;
        padding: 18px;
      }
      .modal.show {
        display: flex;
      }
      .modal-content {
        width: min(520px, 94vw);
        border-radius: 26px;
        padding: 26px;
        text-align: center;
        background: linear-gradient(135deg, #ff2d55 0%, #ff8fab 100%);
        border: 1px solid rgba(255, 255, 255, 0.28);
      }
      .sad-emoji {
        font-size: 5rem;
      }
      .modal-title {
        margin-top: 10px;
        color: white;
        font-size: 1.8rem;
      }
      .modal-text {
        margin-top: 10px;
        color: rgba(255, 255, 255, 0.92);
        font-size: 1.1rem;
        line-height: 1.5;
      }

      @media (max-width: 860px) {
        .menu-grid {
          grid-template-columns: repeat(2, 1fr);
        }
        .polaroid-grid {
          grid-template-columns: repeat(2, 1fr);
        }
        .quotes {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>

  <body>
    <canvas id="stickers"></canvas>
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>

    <!-- Static Menu (top-left) -->
    <div class="top-left" id="menuBtnWrap">
      <div class="chip" id="menuChip">üçì Menu</div>
    </div>

    <!-- Sound icon only (top-right) -->
    <div class="top-right">
      <div class="chip" id="soundChip" title="Toggle sound">üîä</div>
    </div>

    <!-- NEXT arrow (bottom-right) -->
    <div class="next-btn" id="nextBtn" title="Next">‚Üí</div>

    <!-- QUESTION -->
    <section class="section active" id="questionSection">
      <div class="card question-wrap">
        <div class="heart-badge">üíò</div>
        <h1 class="title">Will You Be My Valentine?</h1>
        <p class="subtitle">There are cute surprises waiting for you‚Ä¶</p>

        <div class="btnrow" style="margin-top: 28px">
          <button class="btn-yes" id="yesBtn">Yes! üíû</button>
          <button class="btn-soft" id="noBtn">No üò¢</button>
        </div>

        <p class="subtitle" style="margin-top: 16px; font-size: 1rem">
          (Try hovering ‚ÄúNo‚Äù. It‚Äôs shy.)
        </p>
      </div>
    </section>

    <!-- MENU -->
    <section class="section" id="menuSection">
      <div class="card menu-wrap">
        <div class="menu-head">
          <h2 class="title" style="font-size: clamp(2rem, 4vw, 3rem)">
            Choose Your Surprise
          </h2>
          <p class="subtitle" style="margin-top: 10px">Tap a card ‚ú®</p>
        </div>

        <div class="menu-grid">
          <div class="menu-item" data-target="letterSection">
            <span class="menu-icon">üíå</span>
            <div class="menu-label">Love Letter</div>
            <div class="menu-desc">A sweet note, typewriter style.</div>
          </div>

          <div class="menu-item" data-target="bouquetSection">
            <span class="menu-icon">üåπ</span>
            <div class="menu-label">For You</div>
            <div class="menu-desc">Cute lines, warm feelings.</div>
          </div>

          <div class="menu-item" data-target="gallerySection">
            <span class="menu-icon">üì∏</span>
            <div class="menu-label">Memories</div>
            <div class="menu-desc">Tap a polaroid to open it.</div>
          </div>

          <div class="menu-item" data-target="giftSection">
            <span class="menu-icon">üéÅ</span>
            <div class="menu-label">Surprise</div>
            <div class="menu-desc">Open it for hearts + confetti.</div>
          </div>

          <div class="menu-item" data-target="musicSection">
            <span class="menu-icon">üéµ</span>
            <div class="menu-label">Our Song</div>
            <div class="menu-desc">A cozy playlist vibe.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- LETTER -->
    <section class="section" id="letterSection">
      <div class="card letter-wrap">
        <div class="letter-header">
          <h2 class="title" style="font-size: 2.4rem">To My Valentine</h2>
          <p class="subtitle" style="margin-top: 8px">‚ù§Ô∏è</p>
        </div>

        <div class="letter-paper">
          <div class="letter-body" id="letterTyped"></div>
          <div class="signature" id="letterSig" style="display: none">
            Forever yours,<br />
            Your Valentine üíò
          </div>
        </div>
      </div>
    </section>

    <!-- BOUQUET -->
    <section class="section" id="bouquetSection">
      <div class="card bouquet-wrap">
        <div class="bouquet">üíê</div>
        <h2 class="title" style="font-size: 2.4rem; margin-top: 6px">
          For you, always
        </h2>
        <p class="subtitle" style="margin-top: 10px">
          You make life feel softer and sweeter.
        </p>

        <div class="quotes">
          <div class="quote">‚ÄúYou‚Äôre my favorite place to be.‚Äù</div>
          <div class="quote">‚ÄúYou are my today and all of my tomorrows.‚Äù</div>
          <div class="quote">‚ÄúEvery little moment with you matters.‚Äù</div>
          <div class="quote">
            ‚ÄúIf love had a sound, it would be your laugh.‚Äù
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section class="section" id="gallerySection">
      <div class="card gallery-wrap">
        <div style="text-align: center; padding: 8px 8px 2px">
          <h2 class="title" style="font-size: 2.6rem">Memories</h2>
          <p class="subtitle" style="margin-top: 10px">Tap a polaroid üì∑</p>
        </div>

        <div class="polaroid-grid">
          <div
            class="polaroid"
            style="--rot: -3deg"
            data-emoji="üåÖ"
            data-cap="First sunrise together"
          >
            <div class="polaroid-image">üåÖ</div>
            <div class="polaroid-caption">First sunrise together</div>
          </div>
          <div
            class="polaroid"
            style="--rot: 2deg"
            data-emoji="‚òï"
            data-cap="Morning coffee dates"
          >
            <div class="polaroid-image">‚òï</div>
            <div class="polaroid-caption">Morning coffee dates</div>
          </div>
          <div
            class="polaroid"
            style="--rot: -2deg"
            data-emoji="üåô"
            data-cap="Stargazing nights"
          >
            <div class="polaroid-image">üåô</div>
            <div class="polaroid-caption">Stargazing nights</div>
          </div>
          <div
            class="polaroid"
            style="--rot: 4deg"
            data-emoji="üé®"
            data-cap="Creating memories"
          >
            <div class="polaroid-image">üé®</div>
            <div class="polaroid-caption">Creating memories</div>
          </div>
          <div
            class="polaroid"
            style="--rot: -1deg"
            data-emoji="üå∫"
            data-cap="Our special place"
          >
            <div class="polaroid-image">üå∫</div>
            <div class="polaroid-caption">Our special place</div>
          </div>
          <div
            class="polaroid"
            style="--rot: 3deg"
            data-emoji="üí´"
            data-cap="Forever moments"
          >
            <div class="polaroid-image">üí´</div>
            <div class="polaroid-caption">Forever moments</div>
          </div>
        </div>
      </div>
    </section>

    <!-- GIFT -->
    <section class="section" id="giftSection">
      <div class="card gift-wrap">
        <h2 class="title" style="font-size: 2.6rem">A surprise</h2>
        <p class="subtitle" style="margin-top: 10px">Tap the gift üéÅ</p>

        <div style="margin-top: 18px; position: relative" id="giftContainer">
          <div
            class="gift-box"
            id="giftBox"
            tabindex="0"
            role="button"
            aria-label="Open gift box"
          >
            <div class="box-lid" id="giftLid" aria-hidden="true">
              <span class="lid-top" aria-hidden="true"></span>
            </div>
            <div class="box-body" aria-hidden="true">üéÅ</div>
          </div>

          <div class="gift-message" id="giftMessage">
            You‚Äôre my favorite person üíù
            <div style="font-size: 0.7em; margin-top: 10px">
              and my favorite yes.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MUSIC -->
    <section class="section" id="musicSection">
      <div class="card music-wrap">
        <h2 class="title" style="font-size: 2.6rem; margin-top: 4px">
          Our Song
        </h2>

        <!-- Clickable CD -->
        <div class="cd-stage">
          <div class="doodle doodle-top">‚úé click me</div>

          <button class="cd-btn" id="cdBtn" aria-label="Play or pause our song">
            <div class="disc" id="discIcon">üíø</div>
            <div class="cd-ring"></div>
          </button>

          <div class="doodle doodle-bottom">‚Üª tap to play</div>
        </div>

        <!-- Soft memory text -->
        <p class="subtitle music-line" id="musicLine">
          this song has our memories‚Ä¶ and i replay it in my head like a little
          movie.
        </p>

        <!-- Your audio file -->
        <audio id="ourSong" preload="auto" loop>
          <source src="our-song.mp3" type="audio/mpeg" />
          <source src="our-song.wav" type="audio/wav" />
        </audio>
      </div>
    </section>

    <!-- Sad Modal -->
    <div class="modal" id="sadModal">
      <div class="modal-content">
        <div class="sad-emoji">ü•∫</div>
        <div class="modal-title">Waittt‚Ä¶</div>
        <p class="modal-text">That ‚ÄúNo‚Äù doesn‚Äôt suit you. Try again? ‚ù§Ô∏è</p>
        <div class="btnrow" style="margin-top: 16px">
          <button class="btn-yes" id="tryAgainBtn">Okay okay üíû</button>
          <button class="btn-soft" id="closeSadBtn">Close</button>
        </div>
      </div>
    </div>

    <!-- Gallery Lightbox -->
    <div class="lightbox" id="lightbox">
      <div class="lightbox-card">
        <div class="lightbox-emoji" id="lightboxEmoji">üí´</div>
        <div class="lightbox-caption" id="lightboxCaption">Forever moments</div>
        <div class="btnrow" style="margin-top: 10px">
          <button class="btn-soft" id="closeLightbox">Close</button>
        </div>
      </div>
    </div>

    <script>
      /* =========================
     Section navigation
  ========================== */
      const menuBtnWrap = document.getElementById("menuBtnWrap");
      const menuChip = document.getElementById("menuChip");
      const nextBtn = document.getElementById("nextBtn");

      const sectionOrder = [
        "questionSection",
        "menuSection",
        "letterSection",
        "bouquetSection",
        "gallerySection",
        "giftSection",
        "musicSection",
      ];

      let currentSection = "questionSection";
      let currentIndex = 0;

      function hideAllSections() {
        document
          .querySelectorAll(".section")
          .forEach((s) => s.classList.remove("active"));
      }

      function updateChrome() {
        // Menu button: everywhere except landing
        menuBtnWrap.style.display =
          currentSection === "questionSection" ? "none" : "block";

        // Next arrow: show on all except landing
        nextBtn.style.display =
          currentSection === "questionSection" ? "none" : "flex";
      }

      function showSection(id) {
        hideAllSections();
        currentSection = id;
        currentIndex = sectionOrder.indexOf(id);
        document.getElementById(id).classList.add("active");

        updateChrome();

        if (id === "giftSection") resetGift();
        if (id === "letterSection") startLetter();
      }

      // Next arrow behavior: menu -> letter -> ... -> music -> back to menu
      function goNext() {
        pageFlipSound();

        if (currentSection === "menuSection") {
          showSection("letterSection");
          return;
        }

        if (currentIndex < sectionOrder.length - 1) {
          showSection(sectionOrder[currentIndex + 1]);
        } else {
          showSection("menuSection");
        }
      }

      nextBtn.addEventListener("click", goNext);
      document.addEventListener("keydown", (e) => {
        if (currentSection === "questionSection") return;
        if (e.key === "ArrowRight") goNext();
      });

      menuChip.addEventListener("click", () => {
        clickSound();
        showSection("menuSection");
      });

      // menu card click + cute sparkle
      document.querySelectorAll(".menu-item").forEach((item) => {
        item.addEventListener("click", () => {
          clickSound();
          sparkleSound();
          showSection(item.dataset.target);
        });

        // hover sparkle (throttled so it doesn‚Äôt spam)
        let hoverLock = false;
        item.addEventListener("mouseenter", () => {
          if (hoverLock) return;
          hoverLock = true;
          sparkleSound();
          setTimeout(() => (hoverLock = false), 450);
        });
      });

      /* =========================
     Sound control + SFX (your pack)
  ========================== */
      let soundOn = true;
      const soundChip = document.getElementById("soundChip");

      // Single shared AudioContext for consistency
      let _ctx = null;
      function getCtx() {
        const Ctx = window.AudioContext || window.webkitAudioContext;
        if (!Ctx) return null;
        if (!_ctx) _ctx = new Ctx();
        return _ctx;
      }

      async function ensureAudioUnlocked() {
        const ctx = getCtx();
        if (!ctx) return false;
        if (ctx.state === "suspended") {
          try {
            await ctx.resume();
          } catch (e) {}
        }
        return ctx.state === "running";
      }

      soundChip.addEventListener("click", async () => {
        await ensureAudioUnlocked();
        soundOn = !soundOn;
        soundChip.textContent = soundOn ? "üîä" : "üîá";
        // feedback click
        sfx.click();
      });

      function tone({
        freq = 440,
        dur = 0.12,
        type = "sine",
        gain = 0.12,
        pan = 0,
        glideTo = null,
      }) {
        if (!soundOn) return;
        const ctx = getCtx();
        if (!ctx) return;

        const o = ctx.createOscillator();
        const g = ctx.createGain();

        let p = null;
        if (ctx.createStereoPanner) {
          p = ctx.createStereoPanner();
          p.pan.value = pan;
        }

        o.type = type;
        o.frequency.value = freq;
        g.gain.value = 0.0001;

        o.connect(g);
        if (p) {
          g.connect(p);
          p.connect(ctx.destination);
        } else {
          g.connect(ctx.destination);
        }

        const now = ctx.currentTime;
        g.gain.exponentialRampToValueAtTime(gain, now + 0.01);
        g.gain.exponentialRampToValueAtTime(0.0001, now + dur);

        if (glideTo) {
          o.frequency.exponentialRampToValueAtTime(glideTo, now + dur);
        }

        o.start(now);
        o.stop(now + dur + 0.02);
      }

      function noiseBurst({ dur = 0.12, gain = 0.08 }) {
        if (!soundOn) return;
        const ctx = getCtx();
        if (!ctx) return;

        const bufferSize = Math.floor(ctx.sampleRate * dur);
        const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
        const data = buffer.getChannelData(0);
        for (let i = 0; i < bufferSize; i++) {
          data[i] = (Math.random() * 2 - 1) * (1 - i / bufferSize);
        }

        const src = ctx.createBufferSource();
        src.buffer = buffer;

        const g = ctx.createGain();
        g.gain.value = gain;

        const lp = ctx.createBiquadFilter();
        lp.type = "lowpass";
        lp.frequency.value = 1200;

        src.connect(lp);
        lp.connect(g);
        g.connect(ctx.destination);

        src.start();
        src.stop(ctx.currentTime + dur);
      }

      function sparkle() {
        tone({
          freq: 880,
          dur: 0.05,
          type: "sine",
          gain: 0.08,
          pan: -0.15,
          glideTo: 1040,
        });
        setTimeout(
          () =>
            tone({
              freq: 1040,
              dur: 0.06,
              type: "sine",
              gain: 0.08,
              pan: 0.05,
              glideTo: 1240,
            }),
          45
        );
        setTimeout(
          () =>
            tone({
              freq: 1240,
              dur: 0.07,
              type: "sine",
              gain: 0.07,
              pan: 0.2,
              glideTo: 980,
            }),
          95
        );
      }

      function pageFlip() {
        tone({
          freq: 520,
          dur: 0.05,
          type: "triangle",
          gain: 0.06,
          glideTo: 360,
        });
        setTimeout(
          () =>
            tone({
              freq: 360,
              dur: 0.08,
              type: "triangle",
              gain: 0.07,
              glideTo: 260,
            }),
          40
        );
        setTimeout(() => noiseBurst({ dur: 0.1, gain: 0.03 }), 30);
      }

      function camera() {
        tone({
          freq: 1200,
          dur: 0.03,
          type: "square",
          gain: 0.06,
          glideTo: 800,
        });
        setTimeout(
          () =>
            tone({
              freq: 800,
              dur: 0.03,
              type: "square",
              gain: 0.05,
              glideTo: 600,
            }),
          28
        );
        setTimeout(() => noiseBurst({ dur: 0.05, gain: 0.04 }), 20);
      }

      function giftOpen() {
        tone({ freq: 660, dur: 0.08, type: "sine", gain: 0.1, glideTo: 880 });
        setTimeout(
          () =>
            tone({
              freq: 880,
              dur: 0.1,
              type: "sine",
              gain: 0.11,
              glideTo: 1100,
            }),
          80
        );
        setTimeout(
          () =>
            tone({
              freq: 1100,
              dur: 0.12,
              type: "sine",
              gain: 0.1,
              glideTo: 980,
            }),
          160
        );
        setTimeout(() => sparkle(), 220);
      }

      function confettiPop() {
        noiseBurst({ dur: 0.1, gain: 0.06 });
        tone({
          freq: 740,
          dur: 0.06,
          type: "triangle",
          gain: 0.08,
          glideTo: 980,
        });
      }

      function click() {
        tone({
          freq: 520,
          dur: 0.06,
          type: "triangle",
          gain: 0.08,
          glideTo: 460,
        });
      }

      function sad() {
        tone({ freq: 260, dur: 0.14, type: "sine", gain: 0.12, glideTo: 200 });
        setTimeout(
          () =>
            tone({
              freq: 200,
              dur: 0.12,
              type: "sine",
              gain: 0.1,
              glideTo: 170,
            }),
          80
        );
      }

      const sfx = {
        click,
        sparkle,
        pageFlip,
        camera,
        giftOpen,
        confettiPop,
        sad,
      };

      // unlock audio on first interaction
      async function unlockOnce() {
        await ensureAudioUnlocked();
        window.removeEventListener("pointerdown", unlockOnce);
        window.removeEventListener("keydown", unlockOnce);
      }
      window.addEventListener("pointerdown", unlockOnce, { once: true });
      window.addEventListener("keydown", unlockOnce, { once: true });

      /* ========= Compatibility wrappers =========
     Your existing code calls these function names.
     We map them to the new sfx pack.
  ========================================== */
      function clickSound() {
        sfx.click();
      }
      function sparkleSound() {
        sfx.sparkle();
      }
      function pageFlipSound() {
        sfx.pageFlip();
      }
      function cameraClickSound() {
        sfx.camera();
      }
      function giftOpenSound() {
        sfx.giftOpen();
      }
      function sadSound() {
        sfx.sad();
      }
      function yesSound() {
        // yes should feel like celebration
        sfx.confettiPop();
        sfx.sparkle();
      }

      /* =========================
     Confetti
  ========================== */
      function confettiBurst(x, y, count = 120) {
        const colors = ["#ffffff", "#ffd1dc", "#ff2d55", "#ff8fab", "#ffe5ec"];
        for (let i = 0; i < count; i++) {
          const p = document.createElement("div");
          p.style.position = "fixed";
          p.style.left = x + "px";
          p.style.top = y + "px";
          p.style.width = Math.random() * 7 + 5 + "px";
          p.style.height = Math.random() * 10 + 6 + "px";
          p.style.background =
            colors[Math.floor(Math.random() * colors.length)];
          p.style.borderRadius = "3px";
          p.style.zIndex = 9999;
          p.style.pointerEvents = "none";
          p.style.opacity = "0.95";
          p.style.transform = `rotate(${Math.random() * 360}deg)`;

          const dx = (Math.random() * 2 - 1) * 260;
          const dy = Math.random() * -1 * 320 - 120;
          const rot = (Math.random() * 2 - 1) * 360;

          document.body.appendChild(p);

          const duration = Math.random() * 700 + 900;
          const start = performance.now();

          function anim(t) {
            const k = Math.min(1, (t - start) / duration);
            const ease = 1 - Math.pow(1 - k, 3);
            p.style.transform = `translate(${dx * ease}px, ${
              dy * ease + 220 * k
            }px) rotate(${rot * k}deg)`;
            p.style.opacity = String(0.95 * (1 - k));
            if (k < 1) requestAnimationFrame(anim);
            else p.remove();
          }
          requestAnimationFrame(anim);
        }
      }

      /* =========================
     YES / NO
  ========================== */
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const sadModal = document.getElementById("sadModal");

      yesBtn.addEventListener("click", (e) => {
        yesSound();
        confettiBurst(e.clientX, e.clientY, 150);
        setTimeout(() => showSection("menuSection"), 200);
      });

      // "No" dodge
      const dodgeRadius = 115;

      function dodgeNoButton() {
        const btnRect = noBtn.getBoundingClientRect();
        const padding = 12;
        const maxX = window.innerWidth - btnRect.width - padding;
        const maxY = window.innerHeight - btnRect.height - padding;

        const x = Math.max(padding, Math.min(maxX, Math.random() * maxX));
        const y = Math.max(padding + 80, Math.min(maxY, Math.random() * maxY));

        noBtn.style.position = "fixed";
        noBtn.style.left = x + "px";
        noBtn.style.top = y + "px";
        noBtn.style.zIndex = 70;
      }

      noBtn.addEventListener("mouseenter", () => {
        if (Math.random() < 0.2) return;
        dodgeNoButton();
        clickSound();
      });

      document.addEventListener("mousemove", (e) => {
        if (currentSection !== "questionSection") return;
        const r = noBtn.getBoundingClientRect();
        const cx = r.left + r.width / 2;
        const cy = r.top + r.height / 2;
        const dist = Math.hypot(e.clientX - cx, e.clientY - cy);
        if (dist < dodgeRadius && Math.random() < 0.18) dodgeNoButton();
      });

      noBtn.addEventListener("click", () => {
        sadSound();
        sadModal.classList.add("show");
      });

      document.getElementById("tryAgainBtn").addEventListener("click", () => {
        clickSound();
        sadModal.classList.remove("show");
        resetNoButton();
      });

      document.getElementById("closeSadBtn").addEventListener("click", () => {
        clickSound();
        sadModal.classList.remove("show");
      });

      function resetNoButton() {
        noBtn.style.position = "";
        noBtn.style.left = "";
        noBtn.style.top = "";
        noBtn.style.zIndex = "";
      }

      /* =========================
     Letter typewriter (no replay button)
  ========================== */
      const letterEl = document.getElementById("letterTyped");
      const letterSig = document.getElementById("letterSig");

      const letterParagraphs = [
        "Hi my love,",
        "If I could bottle up the feeling of being with you, I‚Äôd keep it close forever. You make life feel softer, warmer, and a little more magical.",
        "You‚Äôre my favorite notification, my favorite smile, and the person I want to share every tiny thing with ‚Äî the good, the silly, and everything in between.",
        "So‚Ä¶ will you be my Valentine? ‚ù§Ô∏è",
      ];

      let typing = false;

      async function typeLetter() {
        if (typing) return;
        typing = true;

        letterSig.style.display = "none";
        letterEl.innerHTML = "";

        pageFlipSound();

        for (const p of letterParagraphs) {
          const para = document.createElement("p");
          letterEl.appendChild(para);
          for (let i = 0; i < p.length; i++) {
            para.textContent += p[i];
            await wait(10 + Math.random() * 18);
          }
        }

        const caret = document.createElement("span");
        caret.className = "typewriter-caret";
        letterEl.appendChild(caret);

        await wait(450);
        caret.remove();

        letterSig.style.display = "block";
        typing = false;
      }

      function startLetter() {
        if (!letterEl.textContent.trim()) typeLetter();
      }

      function wait(ms) {
        return new Promise((r) => setTimeout(r, ms));
      }

      /* =========================
     Gallery lightbox + camera click
  ========================== */
      const lightbox = document.getElementById("lightbox");
      const lightboxEmoji = document.getElementById("lightboxEmoji");
      const lightboxCaption = document.getElementById("lightboxCaption");

      document.querySelectorAll(".polaroid").forEach((p) => {
        p.addEventListener("click", () => {
          cameraClickSound();
          lightboxEmoji.textContent = p.dataset.emoji || "üí´";
          lightboxCaption.textContent = p.dataset.cap || "A sweet moment";
          lightbox.classList.add("show");
        });
      });

      document.getElementById("closeLightbox").addEventListener("click", () => {
        clickSound();
        lightbox.classList.remove("show");
      });

      lightbox.addEventListener("click", (e) => {
        if (e.target === lightbox) {
          clickSound();
          lightbox.classList.remove("show");
        }
      });

      /* =========================
     Gift open + sound
  ========================== */
      let giftOpened = false;
      const giftBox = document.getElementById("giftBox");
      const giftLid = document.getElementById("giftLid");
      const giftMsg = document.getElementById("giftMessage");
      const giftContainer = document.getElementById("giftContainer");

      function resetGift() {
        giftOpened = false;
        giftMsg.classList.remove("show");
        giftLid.classList.remove("lid-open");
      }

      function openGift() {
        if (giftOpened) return;
        giftOpened = true;

        giftOpenSound();
        giftMsg.classList.add("show");
        giftLid.classList.add("lid-open");
        confettiBurst(window.innerWidth / 2, window.innerHeight / 2, 110);

        const heartCount = 26;
        for (let i = 0; i < heartCount; i++) {
          setTimeout(() => createHeartFromBox(), i * 55);
        }
      }

      function createHeartFromBox() {
        const heart = document.createElement("div");
        heart.className = "floating-heart";
        heart.textContent = ["‚ù§Ô∏è", "üíó", "üíì", "üíï", "üíû"][
          Math.floor(Math.random() * 5)
        ];

        const size = (Math.random() * 0.9 + 1.6).toFixed(2);
        heart.style.fontSize = `${size}em`;

        const r = giftBox.getBoundingClientRect();
        const minX = r.left + 18;
        const maxX = r.right - 30;
        const left = Math.floor(Math.random() * (maxX - minX + 1) + minX);
        heart.style.left = left + "px";

        const bottom = window.innerHeight - (r.top + r.height / 2);
        heart.style.bottom = bottom + "px";

        const dx = Math.floor(Math.random() * 200 - 100) + "px";
        heart.style.setProperty("--dx", dx);

        giftContainer.appendChild(heart);
        heart.addEventListener("animationend", () => heart.remove());
      }

      giftBox.addEventListener("click", openGift);
      giftBox.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          openGift();
        }
      });

      /* =========================
     Cute background stickers (canvas)
  ========================== */
      const canvas = document.getElementById("stickers");
      const ctx = canvas.getContext("2d");

      let W, H, DPR;
      function resize() {
        DPR = window.devicePixelRatio || 1;
        W = canvas.width = Math.floor(window.innerWidth * DPR);
        H = canvas.height = Math.floor(window.innerHeight * DPR);
      }
      window.addEventListener("resize", resize);
      resize();

      const stickerSet = [
        "‚ù§Ô∏è",
        "üíó",
        "üíò",
        "üíù",
        "üíï",
        "üíû",
        "üéÄ",
        "‚ú®",
        "üåπ",
        "üíå",
        "üçì",
        "üß∏",
      ];
      const stickers = Array.from({ length: 70 }).map(() => spawnSticker());

      function spawnSticker() {
        const emoji = stickerSet[Math.floor(Math.random() * stickerSet.length)];
        return {
          emoji,
          x: Math.random() * W,
          y: Math.random() * H,
          s: (Math.random() * 0.55 + 0.25) * DPR,
          size: (Math.random() * 22 + 18) * DPR,
          rot: Math.random() * Math.PI * 2,
          rotSpd: Math.random() * 0.006 - 0.003,
          drift: (Math.random() * 0.9 - 0.45) * DPR,
          alpha: Math.random() * 0.35 + 0.12,
          wobble: Math.random() * Math.PI * 2,
        };
      }

      function drawSticker(st) {
        ctx.save();
        ctx.globalAlpha = st.alpha;
        ctx.translate(st.x, st.y);
        ctx.rotate(st.rot);
        ctx.font = `${st.size}px "Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji",sans-serif`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText(st.emoji, 0, 0);
        ctx.restore();
      }

      function tick() {
        ctx.clearRect(0, 0, W, H);

        for (let i = 0; i < stickers.length; i++) {
          const st = stickers[i];

          st.y += st.s;
          st.x += Math.sin(st.wobble) * 0.6 * DPR + st.drift * 0.2;
          st.wobble += 0.015;
          st.rot += st.rotSpd;

          if (st.y > H + 60) {
            stickers[i] = spawnSticker();
            stickers[i].y = -60 * DPR;
          }

          if (st.x < -80) st.x = W + 80;
          if (st.x > W + 80) st.x = -80;

          drawSticker(st);
        }
        requestAnimationFrame(tick);
      }
      tick();
      /* =========================
   Music: click CD to play/pause
========================== */
      const ourSong = document.getElementById("ourSong");
      const cdBtn = document.getElementById("cdBtn");
      const discIcon = document.getElementById("discIcon");
      const musicLine = document.getElementById("musicLine");

      function syncMusicMute() {
        if (!ourSong) return;
        ourSong.muted = !soundOn; // stays synced silently
      }

      function setDiscState(isPlaying) {
        if (!discIcon) return;
        discIcon.classList.remove("playing", "paused");
        discIcon.classList.add(isPlaying ? "playing" : "paused");
      }

      async function toggleSong() {
        if (!ourSong) return;

        await ensureAudioUnlocked();
        syncMusicMute();

        // little visual pulse
        if (cdBtn) {
          cdBtn.classList.remove("pulse");
          void cdBtn.offsetWidth; // reflow to restart animation
          cdBtn.classList.add("pulse");
          setTimeout(() => cdBtn.classList.remove("pulse"), 520);
        }

        if (ourSong.paused) {
          try {
            await ourSong.play();
            setDiscState(true);
            sparkleSound();
            if (musicLine)
              musicLine.textContent =
                "this song has our memories‚Ä¶ and i replay it in my head like a little movie.";
          } catch (e) {
            // if browser blocks, it‚Äôll usually work on a second tap
            if (musicLine)
              musicLine.textContent = "tap again‚Ä¶ i‚Äôm trying to play ü•∫";
          }
        } else {
          ourSong.pause();
          setDiscState(false);
          clickSound();
          if (musicLine)
            musicLine.textContent = "paused‚Ä¶ but the memories are still here.";
        }
      }

      if (cdBtn) cdBtn.addEventListener("click", toggleSong);

      // set initial state
      setDiscState(false);

      // keep mute synced whenever sound icon is toggled (no UI mention needed)
      soundChip.addEventListener("click", () => {
        syncMusicMute();
      });

      /* =========================
     Init
  ========================== */
      showSection("questionSection");
    </script>
  </body>
</html>
